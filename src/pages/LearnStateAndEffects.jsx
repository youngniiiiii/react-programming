// ìƒíƒœëŠ” ìŠ¤ëƒ…ìƒ· ê°™ì´ ì‘ë™í•œë‹¤.
// ìƒíƒœë€? ì‹œê°„ì˜ íë¦„ì— ë”°ë¼ ë³€í•˜ëŠ” ë°ì´í„°ë¥¼ ë§í•œë‹¤.
// ìŠ¤ëƒ…ìƒ·ì€ íë¥´ëŠ” ìƒíƒœì˜ íŠ¹ì • ì‹œì ì—ì„œì˜ ë°ì´í„° ì¡°ê°ì„ ë§í•œë‹¤.
// ìŠ¤ëƒ…ìƒ·ì€ í˜„ì¬ ì‹¤í–‰ëœ í•¨ìˆ˜ ëª¸ì²´ ì•ˆì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
// ë Œë” íŠ¸ë¦¬ê±°(ìš”ì²­)ë¥¼ ìˆ˜í–‰í•˜ëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ì— ì „ë‹¬í•œ nextStateëŠ” ë‹¤ìŒ ë Œë”ë§ ì‹œì ì— ë°˜ì˜ëœë‹¤.
// ê·¸ë ‡ë‹¤ë©´? í˜„ì¬ ì‹œì ì—ì„œ ë³€ê²½ë  ìƒíƒœì— ì ‘ê·¼í•  ìˆ˜ëŠ” ì—†ëŠ”ê°€?
// ì•„ë‹ˆë‹¤. ì‚¬ì´ë“œ ì´í™íŠ¸ë¡œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.
// 1. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
// 2. useEffect í›…

import { useEffect, useState } from 'react';

// ë¦¬ì•¡íŠ¸: LearnStateAndEffects ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤.
// ë¦¬ì•¡íŠ¸ ë Œë” íŠ¸ë¦¬ê±° íš¨ìœ¤ë‹˜ì´ ìš”ì²­í–ˆìœ¼ë‹ˆê¹Œ.
function LearnStateAndEffects() {
  const [count, setCount] = useState(0);

  // ì´í™íŠ¸ ì‚¬ìš© (ë™ê¸°í™”)
  // ìƒíƒœì˜ ë³€ê²½ì´ ë°œìƒí•˜ë©´ ì´í™íŠ¸ì— ì„¤ì •ëœ ì½œë°± í•¨ìˆ˜ê°€ì‹¤í–‰ëœë‹¤.
  // ì¦‰ ë‹¤ìŒ ìƒíƒœ(nextState)ì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.
  useEffect(
    /* 1ë‹¨ê³„: ì´í™íŠ¸ ì½œë°± í•¨ìˆ˜ */
    () => {
      // DOM ì»¤ë°‹ ì´í›„ì— ì‹¤í–‰
      // ì´í™íŠ¸ ì½œë°± í•¨ìˆ˜
      console.log('count in effect', count); // nextState
    },
    /* 2ë‹¨ê³„: ì´í™íŠ¸ ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ì¡°ê±´(ë°°ì—´ í¬í•¨ëœ í•­ëª©) */  
    // ì¢…ì†ì„± ë°°ì—´ì´ ì—†ëŠ” ê²½ìš°, (ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë  ë•Œë§ˆë‹¤) ì´í™íŠ¸ í•¨ìˆ˜ê°€ í•­ìƒ ì‹¤í–‰
    // undefined
    // ì¢…ì†ì„± ë°°ì—´ì´ ë¹ˆ ê²½ìš°, ì»´í¬ë„ŒíŠ¸ ìµœì´ˆ ë Œë”ë§ ì‹œ 1íšŒ ì‹¤í–‰
    // [],
    // ì¢…ì†ì„± ë°°ì—´ì— ì˜ì¡´í•˜ëŠ” ìƒíƒœë¥¼ ì„¤ì •í•˜ë©´
    // ë¦¬ì•¡íŠ¸ëŠ” ì¢…ì†ëœ ìƒíƒœì˜ ë³€ê²½ì„ ê°ì§€(ì´ì „ â†’ ì´í›„)
    // ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆë‹¤ë©´ ì´í™íŠ¸ ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤.
    [count]
  );

  const handleClick = () => {
    setCount(count + 10); // count (snapshot) = 0
    console.log('count in event handler', count); // 10???, 0!!!
  };

  /* -------------------------------------------------------------------------- */

  const [isShow, setIsShow] = useState(true);

  // current state snapshot

  useEffect(() => {
    console.log(isShow); // next state snapshot
  }, [isShow]);

  const handleToggle = () => {
    setIsShow(!isShow);
    console.log('isShow = ', isShow); // current state snapshot
  };

  /* -------------------------------------------------------------------------- */

  // ìƒíƒœ (ìŠ¤ëƒ…ìƒ·)
  const [studyMessage, setStudyMessage] = useState('ë¦¬ì•¡íŠ¸ì— ëŒ€í•´ì„œ ì•Œì•„ë´ìš”');

  // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  const handleChangeMessage = () => {
    // ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ì‹¤í–‰ë˜ë©´ ë Œë” íŠ¸ë¦¬ê±°) - íš¨ìœ¤
    // ë¦¬ì•¡íŠ¸!!!! ë‚˜(íš¨ìœ¤) í™”ë©´ì˜ ë©”ì‹œì§€ê°€ ë°”ë€Œê¸¸ ì›í•´!! ë°”ê¿”ì¤˜!!
    setStudyMessage('íš¨ìœ¤ë‹˜ í™”ì´íŒ…!!! ğŸ˜„');
  }

  // ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ (í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë‹¤ì‹œ ì‹¤í–‰)
  // DOM ì»¤ë°‹: ìƒíƒœê°€ ë‹¤ìŒ ìƒíƒœë¡œ ë³€ê²½ë˜ì–´ ë Œë”ë§ ë˜ë©´ ë¦¬ì•¡íŠ¸ê°€ ì‹¤ì œ DOM ë³€ê²½ ì´ë ¥ì„ ë°˜ì˜

  // ì´í™íŠ¸ (DOM ì»¤ë°‹ ì´í›„ì— ì‹¤í–‰) - í¬ì†Œ
  // ì´í™íŠ¸ ì‹¤í–‰ ì¡°ê±´(ë°°ì—´ë¡œ ì„¤ì •) - ì˜ì€
  useEffect(
    /* callback - when??? */
    () => {

    },
    [studyMessage]
  )

  return (
    <div className="m-10 flex flex-col gap-2 items-start">
      <h2 className={`text-indigo-600 font-suit text-2xl`}>
        ìƒíƒœ ë° ì´í™íŠ¸ í•™ìŠµí•˜ê¸° ({count})
      </h2>
      {/* DOM ì»¤ë°‹: ìƒíƒœê°€ ë‹¤ìŒ ìƒíƒœë¡œ ë³€ê²½ë˜ì–´ ë Œë”ë§ ë˜ë©´ ë¦¬ì•¡íŠ¸ê°€ ì‹¤ì œ DOM ë³€ê²½ ì´ë ¥ì„ ë°˜ì˜ */}
      <p>{studyMessage}</p>
      <button 
        type='button' 
        onClick={handleChangeMessage}>ë©”ì‹œì§€ ë³€ê²½ ìš”ì²­(trigger)</button>





      <button type="button" onClick={handleToggle}>
        {isShow ? 'ê°ì¶¤' : 'ìˆ¨ê¹€'}
      </button>
      {isShow && (
        <button type="button" onClick={handleClick}>
          +10
        </button>
      )}
    </div>
  );
}

export default LearnStateAndEffects;
